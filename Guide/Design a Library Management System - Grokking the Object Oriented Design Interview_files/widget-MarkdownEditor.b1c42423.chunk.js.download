(this.__LOADABLE_LOADED_CHUNKS__=this.__LOADABLE_LOADED_CHUNKS__||[]).push([[72],{1527:function(t,e,o){"use strict";o.r(e),o.d(e,"default",(function(){return u}));var r=o(0),i=o.n(r),n=o(50),s=o(200),a=o.n(s),l=o(819),h=o(1868),p=o(1869),d=o(1775);const c=Object(n.a)({resolved:{},chunkName:()=>"author",isReady(t){const e=this.resolve(t);return!1!==this.resolved[e]&&!!o.m[e]},importAsync:()=>Promise.all([o.e(0),o.e(1),o.e(2),o.e(3),o.e(28)]).then(o.bind(null,1862)),requireAsync(t){const e=this.resolve(t);return this.resolved[e]=!1,this.importAsync(t).then(t=>(this.resolved[e]=!0,t))},requireSync(t){const e=this.resolve(t);return o(e)},resolve(){return 1862}},{fallback:i.a.createElement("div",null,"Loading...")});class u extends i.a.Component{constructor(){super(...arguments),this.state={isSpellCheckEnabled:!0},this.onMarkdownUpdated=a()(t=>{if(!t)return;const{mdText:e,mdHtml:o,cursorPosition:r,reFocus:i=null}=t;void 0!==e&&"edit"===this.props.mode&&this.props.updateContentState({text:e,mdHtml:o,cursorPosition:r},()=>{var t,e,o;i&&(null===(t=this.inEdit)||void 0===t||null===(e=t.textAreaElemRef)||void 0===e||null===(o=e.current)||void 0===o||o.focus())})},50),this.getMDHtml=()=>{let{mdHtml:t}=this.props.content;return!!this.props.config&&this.props.config.inEditor&&(null!==t&&""!==t||(t="".concat('<p style="font-size:16px;color:#ddd"><i>').concat(this.props.placeholder,"</i></p>"))),t},this.saveWidgetsData=t=>{this.props.saveWidgetUserData(t,{compId:this.props.content.comp_id,reset:!1})},this.toggleSpellCheck=()=>{this.setState({isSpellCheckEnabled:!this.state.isSpellCheckEnabled})},this.getViewerBackgroundColor=t=>{let e=null;const o=t.match(/<!--backgroundColor:'([\s\S]*?)'-->/);return o&&(e=o[1]),e}}static getComponentDefault(){return p.a}saveComponent(){const{text:t,mdHtml:e,cursorPosition:o}=this.props.content;this.props.updateContentState({text:t,mdHtml:e,cursorPosition:o})}render(){const{config:t,mode:e,content:o,fullScreen:r,toggleFullScreen:n,fullscreenIconToggle:s,comps:a,index:p,hash:u}=this.props,{text:g,mdHtml:m,cursorPosition:f}=o,v=!!t&&t.inEditor,x=r?d.a:d.g;if("edit"!==e){const{location:t}=this.props,e=Object(h.a)(t),o=this.getViewerBackgroundColor(m);return i.a.createElement(l.a,{highlightsAvailable:e||this.props.highlights,authorId:this.props.authorId,collectionId:this.props.collectionId,saveHighlights:this.saveWidgetsData,default_themes:this.props.default_themes,contentSnapshot:this.props.contentSnapshot,docker:this.props.docker,mdHtml:this.getMDHtml(),logWidgetInteraction:this.props.logWidgetInteraction,isShot:this.props.isShot,userThemes:this.props.userThemes,backgroundColor:o,positionedLeft:this.props.positionedLeft,isUsedInColumn:this.props.highlights,widthOfComp:this.props.widthOfComp,widthOfOtherComp:this.props.widthOfOtherComp})}const b=(a&&a.size-1)===p;return i.a.createElement(x,null,i.a.createElement(c,{ref:t=>this.inEdit=t,fullScreen:r,fullscreenIconToggle:s,text:g,mdHtml:m,cursorPosition:f,isSpellCheckEnabled:this.state.isSpellCheckEnabled,toggleSpellCheck:this.toggleSpellCheck,onUpdate:this.onMarkdownUpdated,onExpand:n,getMDHtml:this.getMDHtml,default_themes:this.props.default_themes,placeholder:this.props.placeholder,dispatch:this.props.dispatch,isDraft:this.props.isDraft,pageId:this.props.pageId,authorId:this.props.authorId,collectionId:this.props.collectionId,shotId:this.props.shotId,editorPageId:this.props.editorPageId,setFocus:v,userId:this.props.userId,docker:this.props.docker,index:p,hash:u,isLastWidgetOnPage:b}))}}u.defaultProps={placeholder:"Write here ...",docker:{},logWidgetInteraction:()=>null,userThemes:null,highlights:!1,positionedLeft:null,widthOfComp:50,widthOfOtherComp:50}},1775:function(t,e,o){"use strict";o.d(e,"a",(function(){return h})),o.d(e,"e",(function(){return p})),o.d(e,"f",(function(){return d})),o.d(e,"c",(function(){return c})),o.d(e,"d",(function(){return u})),o.d(e,"b",(function(){return g}));var r=o(1),i=o(1785),n=o(18),s=o(12),a=o(5);const l=r.d.div.withConfig({displayName:"styles__MarkdownEditorStyled",componentId:"sc-3mvtlg-0"})([".textEditor-Markdown{position:relative;}.textEditor-Markdown-label{z-index:100;text-align:center;border-bottom:none;background:",";border-radius:",";padding:10px 0;width:100%;&.left{left:-10px;}}@media (max-width:480px){.textEditor-Markdown-label{text-align:left;}}.btn .btn-expand{position:absolute;right:15px;top:5px;border:none;background:transparent;svg{transition:0.2s;cursor:pointer;&:hover{stroke:",";}}&:active,&:hover,&:focus{outline:none;background:transparent;box-shadow:none;}}.btn .btn-close{border:none;background:transparent;padding:0;position:absolute;top:27px;right:30px;z-index:1;svg{transition:0.2s;cursor:pointer;&:hover{stroke:",";}}&:active,&:hover,&:focus{outline:none;background:transparent;box-shadow:none;}& > i{font-size:",";}}.panel{box-shadow:none;border-color:",";margin-bottom:0;height:40px;.b-btn_default{color:",";line-height:0;vertical-align:super;&:hover{color:",";}}.panel-body{padding:0;}.grid-icon{stroke:",";margin:6px 8px 0px 9px;transition:0.2s;cursor:pointer;&:hover{stroke:",";}}.grid-icon-no-right-padding{stroke:",";margin:6px 0px 0px 9px;transition:0.2s;cursor:pointer;&:hover{stroke:",";}}.b-image-slim-uploader{width:35px;height:35px;.image-upload-btn{margin:0;font-size:",";color:",";padding:0;top:2px;&:hover{color:",";}}.form-control[type='file']{width:50px;height:auto;}}.markdown-help-icon{@media (max-width:","){display:none;}}}"],t=>{let{theme:e}=t;return e.palette.grey[100]},n.u,t=>{let{theme:e}=t;return e.palette.primary.main},t=>{let{theme:e}=t;return e.palette.primary.main},s.a.h4,t=>{let{theme:e}=t;return e.palette.grey[300]},t=>{let{theme:e}=t;return e.palette.grey[400]},t=>{let{theme:e}=t;return e.palette.grey[500]},t=>{let{theme:e}=t;return e.palette.grey[400]},t=>{let{theme:e}=t;return e.palette.primary.main},t=>{let{theme:e}=t;return e.palette.grey[400]},t=>{let{theme:e}=t;return e.palette.primary.main},s.a.textLarge,t=>{let{theme:e}=t;return e.palette.grey[400]},t=>{let{theme:e}=t;return e.palette.grey[500]},a.f.pixels),h=Object(r.d)(l).withConfig({displayName:"styles__FullScreen",componentId:"sc-3mvtlg-1"})(["padding:20px;overflow-y:auto;.col,.row,.textEditor-Markdown,.cmcomp-editor-container-markdown,.CodeMirror-wrap,.markdownViewer,.viewer-container{height:100%;}.markdownViewer{overflow:auto;}"]),p=r.d.div.withConfig({displayName:"styles__SpellCheckToggle",componentId:"sc-3mvtlg-2"})(["position:absolute;top:10px;right:30px;line-height:0;cursor:pointer;svg{transition:0.2s;cursor:pointer;&:hover{stroke:",";}}.switch{width:34px;height:18px;& .switch-toggle{width:17px;height:16px;}& .on{background:",";.switch-toggle{left:15px;}}}"],t=>{let{theme:e}=t;return e.palette.primary.main},t=>{let{theme:e}=t;return e.palette.grey[400]}),d=Object(r.d)(p).withConfig({displayName:"styles__SpellCheckToggleFullScreen",componentId:"sc-3mvtlg-3"})(["right:53px;svg{transition:0.2s;cursor:pointer;&:hover{stroke:",";}}"],t=>{let{theme:e}=t;return e.palette.primary.main}),c=r.d.div.withConfig({displayName:"styles__PreviewToggle",componentId:"sc-3mvtlg-4"})(["position:absolute;top:11px;right:60px;cursor:pointer;svg{transition:0.2s;cursor:pointer;&:hover{stroke:",";}}"],t=>{let{theme:e}=t;return e.palette.primary.main}),u=Object(r.d)(c).withConfig({displayName:"styles__PreviewToggleFullScreen",componentId:"sc-3mvtlg-5"})(["right:83px;"]),g=Object(r.d)(i.a).withConfig({displayName:"styles__MarkdownTextarea",componentId:"sc-3mvtlg-6"})(["width:98%;border:none;background:transparent;outline:none;resize:none;font-size:",";font-family:Consolas,'Liberation Mono',Menlo,Courier,monospace;"],s.a.detail);e.g=l},1785:function(t,e,o){"use strict";var r=o(24),i=o(108),n=o(306),s=o(135),a=o(0),l=(o(2),!!document.documentElement.currentStyle),h={"min-height":"0","max-height":"none",height:"0",visibility:"hidden",overflow:"hidden",position:"absolute","z-index":"-1000",top:"0",right:"0"},p=["letter-spacing","line-height","font-family","font-weight","font-size","font-style","tab-size","text-rendering","text-transform","width","text-indent","padding-top","padding-right","padding-bottom","padding-left","border-top-width","border-right-width","border-bottom-width","border-left-width","box-sizing"],d={},c=document.createElement("textarea"),u=function(t){Object.keys(h).forEach((function(e){t.style.setProperty(e,h[e],"important")}))};function g(t,e,o,r,i){void 0===o&&(o=!1),void 0===r&&(r=null),void 0===i&&(i=null),null===c.parentNode&&document.body.appendChild(c);var n=function(t,e,o){void 0===o&&(o=!1);if(o&&d[e])return d[e];var r=window.getComputedStyle(t);if(null===r)return null;var i=p.reduce((function(t,e){return t[e]=r.getPropertyValue(e),t}),{}),n=i["box-sizing"];if(""===n)return null;l&&"border-box"===n&&(i.width=parseFloat(i.width)+parseFloat(r["border-right-width"])+parseFloat(r["border-left-width"])+parseFloat(r["padding-right"])+parseFloat(r["padding-left"])+"px");var s=parseFloat(i["padding-bottom"])+parseFloat(i["padding-top"]),a=parseFloat(i["border-bottom-width"])+parseFloat(i["border-top-width"]),h={sizingStyle:i,paddingSize:s,borderSize:a,boxSizing:n};o&&(d[e]=h);return h}(t,e,o);if(null===n)return null;var s=n.paddingSize,a=n.borderSize,h=n.boxSizing,g=n.sizingStyle;Object.keys(g).forEach((function(t){c.style[t]=g[t]})),u(c),c.value=t.value||t.placeholder||"x";var m=-1/0,f=1/0,v=c.scrollHeight;"border-box"===h?v+=a:"content-box"===h&&(v-=s),c.value="x";var x=c.scrollHeight-s,b=Math.floor(v/x);return null!==r&&(m=x*r,"border-box"===h&&(m=m+s+a),v=Math.max(m,v)),null!==i&&(f=x*i,"border-box"===h&&(f=f+s+a),v=Math.min(f,v)),{height:v,minHeight:m,maxHeight:f,rowCount:Math.floor(v/x),valueRowCount:b}}c.setAttribute("tab-index","-1"),c.setAttribute("aria-hidden","true"),u(c);var m=function(){},f=0,v=function(t){function e(e){var o;return(o=t.call(this,e)||this)._onRef=function(t){o._ref=t;var e=o.props.inputRef;"function"!==typeof e?e.current=t:e(t)},o._onChange=function(t){o._controlled||o._resizeComponent(),o.props.onChange(t,Object(n.a)(o))},o._resizeComponent=function(t){void 0===t&&(t=m);var e=g(o._ref,o._uid,o.props.useCacheForDOMMeasurements,o.props.minRows,o.props.maxRows);if(null!==e){var r=e.height,i=e.minHeight,n=e.maxHeight,s=e.rowCount,a=e.valueRowCount;o.rowCount=s,o.valueRowCount=a,o.state.height===r&&o.state.minHeight===i&&o.state.maxHeight===n?t():o.setState({height:r,minHeight:i,maxHeight:n},t)}else t()},o.state={height:e.style&&e.style.height||0,minHeight:-1/0,maxHeight:1/0},o._uid=f++,o._controlled=void 0!==e.value,o._resizeLock=!1,o}Object(s.a)(e,t);var o=e.prototype;return o.render=function(){var t=this.props,e=(t.inputRef,t.maxRows,t.minRows,t.onHeightChange,t.useCacheForDOMMeasurements,Object(i.a)(t,["inputRef","maxRows","minRows","onHeightChange","useCacheForDOMMeasurements"]));return e.style=Object(r.a)({},e.style,{height:this.state.height}),Math.max(e.style.maxHeight||1/0,this.state.maxHeight)<this.state.height&&(e.style.overflow="hidden"),Object(a.createElement)("textarea",Object(r.a)({},e,{onChange:this._onChange,ref:this._onRef}))},o.componentDidMount=function(){var t=this;this._resizeComponent(),this._resizeListener=function(){t._resizeLock||(t._resizeLock=!0,t._resizeComponent((function(){t._resizeLock=!1})))},window.addEventListener("resize",this._resizeListener)},o.componentDidUpdate=function(t,e){t!==this.props&&this._resizeComponent(),this.state.height!==e.height&&this.props.onHeightChange(this.state.height,this)},o.componentWillUnmount=function(){window.removeEventListener("resize",this._resizeListener),function(t){delete d[t]}(this._uid)},e}(a.Component);v.defaultProps={inputRef:m,onChange:m,onHeightChange:m,useCacheForDOMMeasurements:!1},e.a=v},1868:function(t,e,o){"use strict";e.a=t=>{if(!(null===t||void 0===t?void 0:t.pathname))return!1;const e=t.pathname.split("/");if(e.length){if("page"===e[1]&&"draft"!==e[e.length-1])return!0;if(("courses"===e[1]||"collection"===e[1])&&"draft"!==e[e.length-1]&&"versions"!==e[e.length-1])return!0}return!1}},1869:function(t,e,o){"use strict";e.a={version:"2.0",text:"",mdHtml:"",cursorPosition:{line:0,ch:0}}}}]);
//# sourceMappingURL=widget-MarkdownEditor.b1c42423.chunk.js.map